/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var Node=require("./node"),colors=require("../data/colors"),Color=function(t,r,o){var a=this;Array.isArray(t)?this.rgb=t:t.length>=6?(this.rgb=[],t.match(/.{2}/g).map(function(t,r){r<3?a.rgb.push(parseInt(t,16)):a.alpha=parseInt(t,16)/255})):(this.rgb=[],t.split("").map(function(t,r){r<3?a.rgb.push(parseInt(t+t,16)):a.alpha=parseInt(t+t,16)/255})),this.alpha=this.alpha||("number"==typeof r?r:1),void 0!==o&&(this.value=o)};function clamp(t,r){return Math.min(Math.max(t,0),r)}function toHex(t){return"#"+t.map(function(t){return((t=clamp(Math.round(t),255))<16?"0":"")+t.toString(16)}).join("")}Color.prototype=new Node,Color.prototype.type="Color",Color.prototype.luma=function(){var t=this.rgb[0]/255,r=this.rgb[1]/255,o=this.rgb[2]/255;return.2126*(t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(r=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(o=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))},Color.prototype.genCSS=function(t,r){r.add(this.toCSS(t))},Color.prototype.toCSS=function(t,r){var o,a,e,s=t&&t.compress&&!r,i=[];if(a=this.fround(t,this.alpha),this.value)if(0===this.value.indexOf("rgb"))a<1&&(e="rgba");else{if(0!==this.value.indexOf("hsl"))return this.value;e=a<1?"hsla":"hsl"}else a<1&&(e="rgba");switch(e){case"rgba":i=this.rgb.map(function(t){return clamp(Math.round(t),255)}).concat(clamp(a,1));break;case"hsla":i.push(clamp(a,1));case"hsl":o=this.toHSL(),i=[this.fround(t,o.h),this.fround(t,100*o.s)+"%",this.fround(t,100*o.l)+"%"].concat(i)}if(e)return e+"("+i.join(","+(s?"":" "))+")";if(o=this.toRGB(),s){var h=o.split("");h[1]===h[2]&&h[3]===h[4]&&h[5]===h[6]&&(o="#"+h[1]+h[3]+h[5])}return o},Color.prototype.operate=function(t,r,o){for(var a=new Array(3),e=this.alpha*(1-o.alpha)+o.alpha,s=0;s<3;s++)a[s]=this._operate(t,r,this.rgb[s],o.rgb[s]);return new Color(a,e)},Color.prototype.toRGB=function(){return toHex(this.rgb)},Color.prototype.toHSL=function(){var t,r,o=this.rgb[0]/255,a=this.rgb[1]/255,e=this.rgb[2]/255,s=this.alpha,i=Math.max(o,a,e),h=Math.min(o,a,e),n=(i+h)/2,p=i-h;if(i===h)t=r=0;else{switch(r=n>.5?p/(2-i-h):p/(i+h),i){case o:t=(a-e)/p+(a<e?6:0);break;case a:t=(e-o)/p+2;break;case e:t=(o-a)/p+4}t/=6}return{h:360*t,s:r,l:n,a:s}},Color.prototype.toHSV=function(){var t,r,o=this.rgb[0]/255,a=this.rgb[1]/255,e=this.rgb[2]/255,s=this.alpha,i=Math.max(o,a,e),h=Math.min(o,a,e),n=i,p=i-h;if(r=0===i?0:p/i,i===h)t=0;else{switch(i){case o:t=(a-e)/p+(a<e?6:0);break;case a:t=(e-o)/p+2;break;case e:t=(o-a)/p+4}t/=6}return{h:360*t,s:r,v:n,a:s}},Color.prototype.toARGB=function(){return toHex([255*this.alpha].concat(this.rgb))},Color.prototype.compare=function(t){return t.rgb&&t.rgb[0]===this.rgb[0]&&t.rgb[1]===this.rgb[1]&&t.rgb[2]===this.rgb[2]&&t.alpha===this.alpha?0:void 0},Color.fromKeyword=function(t){var r,o=t.toLowerCase();if(colors.hasOwnProperty(o)?r=new Color(colors[o].slice(1)):"transparent"===o&&(r=new Color([0,0,0],0)),r)return r.value=t,r},module.exports=Color;
//# sourceMappingURL=../../sourcemaps/engine/tree/color.js.map
