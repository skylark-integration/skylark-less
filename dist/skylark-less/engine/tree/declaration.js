/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var Node=require("./node"),Value=require("./value"),Keyword=require("./keyword"),Anonymous=require("./anonymous"),MATH=require("../constants").Math,Declaration=function(e,t,i,n,a,o,r,s){this.name=e,this.value=t instanceof Node?t:new Value([t?new Anonymous(t):null]),this.important=i?" "+i.trim():"",this.merge=n,this._index=a,this._fileInfo=o,this.inline=r||!1,this.variable=void 0!==s?s:e.charAt&&"@"===e.charAt(0),this.allowRoot=!0,this.setParent(this.value,this)};function evalName(e,t){var i,n="",a=t.length,o={add:function(e){n+=e}};for(i=0;i<a;i++)t[i].eval(e).genCSS(e,o);return n}Declaration.prototype=new Node,Declaration.prototype.type="Declaration",Declaration.prototype.genCSS=function(e,t){t.add(this.name+(e.compress?":":": "),this.fileInfo(),this.getIndex());try{this.value.genCSS(e,t)}catch(e){throw e.index=this._index,e.filename=this._fileInfo.filename,e}t.add(this.important+(this.inline||e.lastRule&&e.compress?"":";"),this._fileInfo,this._index)},Declaration.prototype.eval=function(e){var t,i,n=!1,a=this.name,o=this.variable;"string"!=typeof a&&(a=1===a.length&&a[0]instanceof Keyword?a[0].value:evalName(e,a),o=!1),"font"===a&&e.math===MATH.ALWAYS&&(n=!0,t=e.math,e.math=MATH.PARENS_DIVISION);try{if(e.importantScope.push({}),i=this.value.eval(e),!this.variable&&"DetachedRuleset"===i.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.getIndex(),filename:this.fileInfo().filename};var r=this.important,s=e.importantScope.pop();return!r&&s.important&&(r=s.important),new Declaration(a,i,r,this.merge,this.getIndex(),this.fileInfo(),this.inline,o)}catch(e){throw"number"!=typeof e.index&&(e.index=this.getIndex(),e.filename=this.fileInfo().filename),e}finally{n&&(e.math=t)}},Declaration.prototype.makeImportant=function(){return new Declaration(this.name,this.value,"!important",this.merge,this.getIndex(),this.fileInfo(),this.inline)},module.exports=Declaration;
//# sourceMappingURL=../../sourcemaps/engine/tree/declaration.js.map
