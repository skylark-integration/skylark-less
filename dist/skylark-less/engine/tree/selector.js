/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
define(["./node","./element","../less-error"],function(t,e,i){"use strict";var n={},s={exports:{}},o=e,r=i,l=function(t,e,i,n,s,o){this.extendList=e,this.condition=i,this.evaldCondition=!i,this._index=n,this._fileInfo=s,this.elements=this.getElements(t),this.mixinElements_=void 0,this.copyVisibilityInfo(o),this.setParent(this.elements,this)};function h(t){return"object"!=typeof t||Array.isArray(t)||!function(t){var e;for(e in t)return!1;return!0}(t)}return(l.prototype=new t).type="Selector",l.prototype.accept=function(t){this.elements&&(this.elements=t.visitArray(this.elements)),this.extendList&&(this.extendList=t.visitArray(this.extendList)),this.condition&&(this.condition=t.visit(this.condition))},l.prototype.createDerived=function(t,e,i){t=this.getElements(t);var n=new l(t,e||this.extendList,null,this.getIndex(),this.fileInfo(),this.visibilityInfo());return n.evaldCondition=null!=i?i:this.evaldCondition,n.mediaEmpty=this.mediaEmpty,n},l.prototype.getElements=function(t){return t?("string"==typeof t&&this.parse.parseNode(t,["selector"],this._index,this._fileInfo,function(e,i){if(e)throw new r({index:e.index,message:e.message},this.parse.imports,this._fileInfo.filename);t=i[0].elements}),t):[new o("","&",!1,this._index,this._fileInfo)]},l.prototype.createEmptySelectors=function(){var t=new o("","&",!1,this._index,this._fileInfo),e=[new l([t],null,null,this._index,this._fileInfo)];return e[0].mediaEmpty=!0,e},l.prototype.match=function(t){var e,i,n=this.elements,s=n.length;if(0===(e=(t=t.mixinElements()).length)||s<e)return 0;for(i=0;i<e;i++)if(n[i].value!==t[i])return 0;return e},l.prototype.mixinElements=function(){if(this.mixinElements_)return this.mixinElements_;var t=this.elements.map(function(t){return t.combinator.value+(t.value.value||t.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);return t?"&"===t[0]&&t.shift():t=[],this.mixinElements_=t},l.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},l.prototype.eval=function(t){var e=this.condition&&this.condition.eval(t),i=this.elements,n=this.extendList;return i=i&&i.map(function(e){return e.eval(t)}),n=n&&n.map(function(e){return e.eval(t)}),this.createDerived(i,n,e)},l.prototype.genCSS=function(t,e){var i;for(t&&t.firstSelector||""!==this.elements[0].combinator.value||e.add(" ",this.fileInfo(),this.getIndex()),i=0;i<this.elements.length;i++)this.elements[i].genCSS(t,e)},l.prototype.getIsOutput=function(){return this.evaldCondition},s.exports=l,h(s.exports)?s.exports:h(n)?n:void 0});
//# sourceMappingURL=../../sourcemaps/engine/tree/selector.js.map
