/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var Node=require("./node"),Element=require("./element"),LessError=require("../less-error"),Selector=function(e,t,i,n,s,o){this.extendList=t,this.condition=i,this.evaldCondition=!i,this._index=n,this._fileInfo=s,this.elements=this.getElements(e),this.mixinElements_=void 0,this.copyVisibilityInfo(o),this.setParent(this.elements,this)};Selector.prototype=new Node,Selector.prototype.type="Selector",Selector.prototype.accept=function(e){this.elements&&(this.elements=e.visitArray(this.elements)),this.extendList&&(this.extendList=e.visitArray(this.extendList)),this.condition&&(this.condition=e.visit(this.condition))},Selector.prototype.createDerived=function(e,t,i){e=this.getElements(e);var n=new Selector(e,t||this.extendList,null,this.getIndex(),this.fileInfo(),this.visibilityInfo());return n.evaldCondition=null!=i?i:this.evaldCondition,n.mediaEmpty=this.mediaEmpty,n},Selector.prototype.getElements=function(e){return e?("string"==typeof e&&this.parse.parseNode(e,["selector"],this._index,this._fileInfo,function(t,i){if(t)throw new LessError({index:t.index,message:t.message},this.parse.imports,this._fileInfo.filename);e=i[0].elements}),e):[new Element("","&",!1,this._index,this._fileInfo)]},Selector.prototype.createEmptySelectors=function(){var e=new Element("","&",!1,this._index,this._fileInfo),t=[new Selector([e],null,null,this._index,this._fileInfo)];return t[0].mediaEmpty=!0,t},Selector.prototype.match=function(e){var t,i,n=this.elements,s=n.length;if(0===(t=(e=e.mixinElements()).length)||s<t)return 0;for(i=0;i<t;i++)if(n[i].value!==e[i])return 0;return t},Selector.prototype.mixinElements=function(){if(this.mixinElements_)return this.mixinElements_;var e=this.elements.map(function(e){return e.combinator.value+(e.value.value||e.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);return e?"&"===e[0]&&e.shift():e=[],this.mixinElements_=e},Selector.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},Selector.prototype.eval=function(e){var t=this.condition&&this.condition.eval(e),i=this.elements,n=this.extendList;return i=i&&i.map(function(t){return t.eval(e)}),n=n&&n.map(function(t){return t.eval(e)}),this.createDerived(i,n,t)},Selector.prototype.genCSS=function(e,t){var i;for(e&&e.firstSelector||""!==this.elements[0].combinator.value||t.add(" ",this.fileInfo(),this.getIndex()),i=0;i<this.elements.length;i++)this.elements[i].genCSS(e,t)},Selector.prototype.getIsOutput=function(){return this.evaldCondition},module.exports=Selector;
//# sourceMappingURL=../../sourcemaps/engine/tree/selector.js.map
