/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var Node=require("./node"),Selector=require("./selector"),Ruleset=require("./ruleset"),Anonymous=require("./anonymous"),AtRule=function(e,t,s,i,r,l,o,u){var n;if(this.name=e,this.value=t instanceof Node?t:t?new Anonymous(t):t,s){for(Array.isArray(s)?this.rules=s:(this.rules=[s],this.rules[0].selectors=new Selector([],null,null,i,r).createEmptySelectors()),n=0;n<this.rules.length;n++)this.rules[n].allowImports=!0;this.setParent(this.rules,this)}this._index=i,this._fileInfo=r,this.debugInfo=l,this.isRooted=o||!1,this.copyVisibilityInfo(u),this.allowRoot=!0};AtRule.prototype=new Node,AtRule.prototype.type="AtRule",AtRule.prototype.accept=function(e){var t=this.value,s=this.rules;s&&(this.rules=e.visitArray(s)),t&&(this.value=e.visit(t))},AtRule.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},AtRule.prototype.isCharset=function(){return"@charset"===this.name},AtRule.prototype.genCSS=function(e,t){var s=this.value,i=this.rules;t.add(this.name,this.fileInfo(),this.getIndex()),s&&(t.add(" "),s.genCSS(e,t)),i?this.outputRuleset(e,t,i):t.add(";")},AtRule.prototype.eval=function(e){var t,s,i=this.value,r=this.rules;return t=e.mediaPath,s=e.mediaBlocks,e.mediaPath=[],e.mediaBlocks=[],i&&(i=i.eval(e)),r&&((r=[r[0].eval(e)])[0].root=!0),e.mediaPath=t,e.mediaBlocks=s,new AtRule(this.name,i,r,this.getIndex(),this.fileInfo(),this.debugInfo,this.isRooted,this.visibilityInfo())},AtRule.prototype.variable=function(e){if(this.rules)return Ruleset.prototype.variable.call(this.rules[0],e)},AtRule.prototype.find=function(){if(this.rules)return Ruleset.prototype.find.apply(this.rules[0],arguments)},AtRule.prototype.rulesets=function(){if(this.rules)return Ruleset.prototype.rulesets.apply(this.rules[0])},AtRule.prototype.outputRuleset=function(e,t,s){var i,r=s.length;if(e.tabLevel=1+(0|e.tabLevel),e.compress){for(t.add("{"),i=0;i<r;i++)s[i].genCSS(e,t);return t.add("}"),void e.tabLevel--}var l="\n"+Array(e.tabLevel).join("  "),o=l+"  ";if(r){for(t.add(" {"+o),s[0].genCSS(e,t),i=1;i<r;i++)t.add(o),s[i].genCSS(e,t);t.add(l+"}")}else t.add(" {"+l+"}");e.tabLevel--},module.exports=AtRule;
//# sourceMappingURL=../../sourcemaps/engine/tree/atrule.js.map
