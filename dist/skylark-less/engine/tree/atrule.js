/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
define(["./node","./selector","./ruleset","./anonymous"],function(t,e,i,s){"use strict";var r={},o={exports:{}},n=t,a=e,l=i,u=s,h=function(t,e,i,s,r,o,l,h){var p;if(this.name=t,this.value=e instanceof n?e:e?new u(e):e,i){for(Array.isArray(i)?this.rules=i:(this.rules=[i],this.rules[0].selectors=new a([],null,null,s,r).createEmptySelectors()),p=0;p<this.rules.length;p++)this.rules[p].allowImports=!0;this.setParent(this.rules,this)}this._index=s,this._fileInfo=r,this.debugInfo=o,this.isRooted=l||!1,this.copyVisibilityInfo(h),this.allowRoot=!0};function p(t){return"object"!=typeof t||Array.isArray(t)||!function(t){var e;for(e in t)return!1;return!0}(t)}return(h.prototype=new n).type="AtRule",h.prototype.accept=function(t){var e=this.value,i=this.rules;i&&(this.rules=t.visitArray(i)),e&&(this.value=t.visit(e))},h.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},h.prototype.isCharset=function(){return"@charset"===this.name},h.prototype.genCSS=function(t,e){var i=this.value,s=this.rules;e.add(this.name,this.fileInfo(),this.getIndex()),i&&(e.add(" "),i.genCSS(t,e)),s?this.outputRuleset(t,e,s):e.add(";")},h.prototype.eval=function(t){var e,i,s=this.value,r=this.rules;return e=t.mediaPath,i=t.mediaBlocks,t.mediaPath=[],t.mediaBlocks=[],s&&(s=s.eval(t)),r&&((r=[r[0].eval(t)])[0].root=!0),t.mediaPath=e,t.mediaBlocks=i,new h(this.name,s,r,this.getIndex(),this.fileInfo(),this.debugInfo,this.isRooted,this.visibilityInfo())},h.prototype.variable=function(t){if(this.rules)return l.prototype.variable.call(this.rules[0],t)},h.prototype.find=function(){if(this.rules)return l.prototype.find.apply(this.rules[0],arguments)},h.prototype.rulesets=function(){if(this.rules)return l.prototype.rulesets.apply(this.rules[0])},h.prototype.outputRuleset=function(t,e,i){var s,r=i.length;if(t.tabLevel=1+(0|t.tabLevel),t.compress){for(e.add("{"),s=0;s<r;s++)i[s].genCSS(t,e);return e.add("}"),void t.tabLevel--}var o="\n"+Array(t.tabLevel).join("  "),n=o+"  ";if(r){for(e.add(" {"+n),i[0].genCSS(t,e),s=1;s<r;s++)e.add(n),i[s].genCSS(t,e);e.add(o+"}")}else e.add(" {"+o+"}");t.tabLevel--},o.exports=h,p(o.exports)?o.exports:p(r)?r:void 0});
//# sourceMappingURL=../../sourcemaps/engine/tree/atrule.js.map
