/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
define(["./chunker"],function(r){"use strict";var t={},e={exports:{}},n=r;function i(r){return"object"!=typeof r||Array.isArray(r)||!function(r){var t;for(t in r)return!1;return!0}(r)}return e.exports=function(){var r,t,e,i,u,c,s,a=[],o={},h=32,f=9,l=10,p=13,v=47;function A(e){for(var n,i,a,b=o.i,d=t,g=o.i-s,m=o.i+c.length-g,x=o.i+=e,k=r;o.i<m;o.i++){if(n=k.charCodeAt(o.i),o.autoCommentAbsorb&&n===v){if("/"===(i=k.charAt(o.i+1))){a={index:o.i,isLineComment:!0};var C=k.indexOf("\n",o.i+2);C<0&&(C=m),o.i=C,a.text=k.substr(a.index,o.i-a.index),o.commentStore.push(a);continue}if("*"===i){var y=k.indexOf("*/",o.i+2);if(y>=0){a={index:o.i,text:k.substr(o.i,y+2-o.i),isLineComment:!1},o.i+=a.text.length-1,o.commentStore.push(a);continue}}break}if(n!==h&&n!==l&&n!==f&&n!==p)break}if(c=c.slice(e+o.i-x+g),s=o.i,!c.length){if(t<u.length-1)return c=u[++t],A(0),!0;o.finished=!0}return b!==o.i||d!==t}return o.save=function(){s=o.i,a.push({current:c,i:o.i,j:t})},o.restore=function(r){(o.i>e||o.i===e&&r&&!i)&&(e=o.i,i=r);var n=a.pop();c=n.current,s=o.i=n.i,t=n.j},o.forget=function(){a.pop()},o.isWhitespace=function(t){var e=o.i+(t||0),n=r.charCodeAt(e);return n===h||n===p||n===f||n===l},o.$re=function(r){o.i>s&&(c=c.slice(o.i-s),s=o.i);var t=r.exec(c);return t?(A(t[0].length),"string"==typeof t?t:1===t.length?t[0]:t):null},o.$char=function(t){return r.charAt(o.i)!==t?null:(A(1),t)},o.$str=function(t){for(var e=t.length,n=0;n<e;n++)if(r.charAt(o.i+n)!==t.charAt(n))return null;return A(e),t},o.$quoted=function(t){var e=t||o.i,n=r.charAt(e);if("'"===n||'"'===n){for(var i=r.length,u=e,c=1;c+u<i;c++){switch(r.charAt(c+u)){case"\\":c++;continue;case"\r":case"\n":break;case n:var s=r.substr(u,c+1);return t||0===t?[n,s]:(A(c+1),s)}}return null}},o.$parseUntil=function(t){var e,n="",i=null,u=!1,c=0,s=[],a=[],h=r.length,f=o.i,l=o.i,p=o.i,v=!0;e="string"==typeof t?function(r){return r===t}:function(r){return t.test(r)};do{var b=r.charAt(p);if(0===c&&e(b))(i=r.substr(l,p-l))?a.push(i):a.push(" "),i=a,A(p-f),v=!1;else{if(u){"*"===b&&"/"===r.charAt(p+1)&&(p++,c--,u=!1),p++;continue}switch(b){case"\\":p++,b=r.charAt(p),a.push(r.substr(l,p-l+1)),l=p+1;break;case"/":"*"===r.charAt(p+1)&&(p++,u=!0,c++);break;case"'":case'"':(n=o.$quoted(p))?(a.push(r.substr(l,p-l),n),l=(p+=n[1].length-1)+1):(A(p-f),i=b,v=!1);break;case"{":s.push("}"),c++;break;case"(":s.push(")"),c++;break;case"[":s.push("]"),c++;break;case"}":case")":case"]":var d=s.pop();b===d?c--:(A(p-f),i=d,v=!1)}++p>h&&(v=!1)}b}while(v);return i||null},o.autoCommentAbsorb=!0,o.commentStore=[],o.finished=!1,o.peek=function(t){if("string"==typeof t){for(var e=0;e<t.length;e++)if(r.charAt(o.i+e)!==t.charAt(e))return!1;return!0}return t.test(c)},o.peekChar=function(t){return r.charAt(o.i)===t},o.currentChar=function(){return r.charAt(o.i)},o.prevChar=function(){return r.charAt(o.i-1)},o.getInput=function(){return r},o.peekNotNumeric=function(){var t=r.charCodeAt(o.i);return t>57||t<43||t===v||44===t},o.start=function(i,a,h){r=i,o.i=t=s=e=0,u=a?n(i,h):[i],c=u[0],A(0)},o.end=function(){var t,n=o.i>=r.length;return o.i<e&&(t=i,o.i=e),{isFinished:n,furthest:o.i,furthestPossibleErrorMessage:t,furthestReachedEnd:o.i>=r.length-1,furthestChar:r[o.i]}},o},i(e.exports)?e.exports:i(t)?t:void 0});
//# sourceMappingURL=../../sourcemaps/engine/parser/parser-input.js.map
