/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var chunker=require("./chunker");module.exports=function(){var r,e,t,n,i,u,c,a=[],s={},o=32,h=9,f=10,l=13,p=47;function b(t){for(var n,a,v,A=s.i,d=e,g=s.i-c,m=s.i+u.length-g,k=s.i+=t,x=r;s.i<m;s.i++){if(n=x.charCodeAt(s.i),s.autoCommentAbsorb&&n===p){if("/"===(a=x.charAt(s.i+1))){v={index:s.i,isLineComment:!0};var C=x.indexOf("\n",s.i+2);C<0&&(C=m),s.i=C,v.text=x.substr(v.index,s.i-v.index),s.commentStore.push(v);continue}if("*"===a){var $=x.indexOf("*/",s.i+2);if($>=0){v={index:s.i,text:x.substr(s.i,$+2-s.i),isLineComment:!1},s.i+=v.text.length-1,s.commentStore.push(v);continue}}break}if(n!==o&&n!==f&&n!==h&&n!==l)break}if(u=u.slice(t+s.i-k+g),c=s.i,!u.length){if(e<i.length-1)return u=i[++e],b(0),!0;s.finished=!0}return A!==s.i||d!==e}return s.save=function(){c=s.i,a.push({current:u,i:s.i,j:e})},s.restore=function(r){(s.i>t||s.i===t&&r&&!n)&&(t=s.i,n=r);var i=a.pop();u=i.current,c=s.i=i.i,e=i.j},s.forget=function(){a.pop()},s.isWhitespace=function(e){var t=s.i+(e||0),n=r.charCodeAt(t);return n===o||n===l||n===h||n===f},s.$re=function(r){s.i>c&&(u=u.slice(s.i-c),c=s.i);var e=r.exec(u);return e?(b(e[0].length),"string"==typeof e?e:1===e.length?e[0]:e):null},s.$char=function(e){return r.charAt(s.i)!==e?null:(b(1),e)},s.$str=function(e){for(var t=e.length,n=0;n<t;n++)if(r.charAt(s.i+n)!==e.charAt(n))return null;return b(t),e},s.$quoted=function(e){var t=e||s.i,n=r.charAt(t);if("'"===n||'"'===n){for(var i=r.length,u=t,c=1;c+u<i;c++){switch(r.charAt(c+u)){case"\\":c++;continue;case"\r":case"\n":break;case n:var a=r.substr(u,c+1);return e||0===e?[n,a]:(b(c+1),a)}}return null}},s.$parseUntil=function(e){var t,n="",i=null,u=!1,c=0,a=[],o=[],h=r.length,f=s.i,l=s.i,p=s.i,v=!0;t="string"==typeof e?function(r){return r===e}:function(r){return e.test(r)};do{var A=r.charAt(p);if(0===c&&t(A))(i=r.substr(l,p-l))?o.push(i):o.push(" "),i=o,b(p-f),v=!1;else{if(u){"*"===A&&"/"===r.charAt(p+1)&&(p++,c--,u=!1),p++;continue}switch(A){case"\\":p++,A=r.charAt(p),o.push(r.substr(l,p-l+1)),l=p+1;break;case"/":"*"===r.charAt(p+1)&&(p++,u=!0,c++);break;case"'":case'"':(n=s.$quoted(p))?(o.push(r.substr(l,p-l),n),l=(p+=n[1].length-1)+1):(b(p-f),i=A,v=!1);break;case"{":a.push("}"),c++;break;case"(":a.push(")"),c++;break;case"[":a.push("]"),c++;break;case"}":case")":case"]":var d=a.pop();A===d?c--:(b(p-f),i=d,v=!1)}++p>h&&(v=!1)}A}while(v);return i||null},s.autoCommentAbsorb=!0,s.commentStore=[],s.finished=!1,s.peek=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++)if(r.charAt(s.i+t)!==e.charAt(t))return!1;return!0}return e.test(u)},s.peekChar=function(e){return r.charAt(s.i)===e},s.currentChar=function(){return r.charAt(s.i)},s.prevChar=function(){return r.charAt(s.i-1)},s.getInput=function(){return r},s.peekNotNumeric=function(){var e=r.charCodeAt(s.i);return e>57||e<43||e===p||44===e},s.start=function(n,a,o){r=n,s.i=e=c=t=0,i=a?chunker(n,o):[n],u=i[0],b(0)},s.end=function(){var e,i=s.i>=r.length;return s.i<t&&(e=n,s.i=t),{isFinished:i,furthest:s.i,furthestPossibleErrorMessage:e,furthestReachedEnd:s.i>=r.length-1,furthestChar:r[s.i]}},s};
//# sourceMappingURL=../../sourcemaps/engine/parser/parser-input.js.map
