/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var contexts={};module.exports=contexts;var Constants=require("./constants"),copyFromOriginal=function(t,e,s){if(t)for(var a=0;a<s.length;a++)t.hasOwnProperty(s[a])&&(e[s[a]]=t[s[a]])},parseCopyProperties=["paths","rewriteUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","pluginManager"];contexts.Parse=function(t){copyFromOriginal(t,this,parseCopyProperties),"string"==typeof this.paths&&(this.paths=[this.paths])};var evalCopyProperties=["paths","compress","ieCompat","math","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope","rewriteUrls"];function isPathRelative(t){return!/^(?:[a-z-]+:|\/|#)/i.test(t)}function isPathLocalRelative(t){return"."===t.charAt(0)}contexts.Eval=function(t,e){copyFromOriginal(t,this,evalCopyProperties),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=e||[],this.importantScope=this.importantScope||[]},contexts.Eval.prototype.enterCalc=function(){this.calcStack||(this.calcStack=[]),this.calcStack.push(!0),this.inCalc=!0},contexts.Eval.prototype.exitCalc=function(){this.calcStack.pop(),this.calcStack||(this.inCalc=!1)},contexts.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},contexts.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},contexts.Eval.prototype.inCalc=!1,contexts.Eval.prototype.mathOn=!0,contexts.Eval.prototype.isMathOn=function(t){return!!this.mathOn&&(!!("/"!==t||this.math===Constants.Math.ALWAYS||this.parensStack&&this.parensStack.length)&&(!(this.math>Constants.Math.PARENS_DIVISION)||this.parensStack&&this.parensStack.length))},contexts.Eval.prototype.pathRequiresRewrite=function(t){return(this.rewriteUrls===Constants.RewriteUrls.LOCAL?isPathLocalRelative:isPathRelative)(t)},contexts.Eval.prototype.rewritePath=function(t,e){var s;return e=e||"",s=this.normalizePath(e+t),isPathLocalRelative(t)&&isPathRelative(e)&&!1===isPathLocalRelative(s)&&(s="./"+s),s},contexts.Eval.prototype.normalizePath=function(t){var e,s=t.split("/").reverse();for(t=[];0!==s.length;)switch(e=s.pop()){case".":break;case"..":0===t.length||".."===t[t.length-1]?t.push(e):t.pop();break;default:t.push(e)}return t.join("/")};
//# sourceMappingURL=../sourcemaps/engine/contexts.js.map
