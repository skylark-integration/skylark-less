/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
var utils=require("./utils"),browser=require("./browser");module.exports=function(e,r,o){return{add:function(n,t){o.errorReporting&&"html"!==o.errorReporting?"console"===o.errorReporting?function(e,n){var t=e.filename||n,l=[],s=(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+" in "+t,i=function(e,r,o){void 0!==e.extract[r]&&l.push("{line} {content}".replace(/\{line\}/,(parseInt(e.line,10)||0)+(r-1)).replace(/\{class\}/,o).replace(/\{content\}/,e.extract[r]))};e.line&&(i(e,0,""),i(e,1,"line"),i(e,2,""),s+=" on line "+e.line+", column "+(e.column+1)+":\n"+l.join("\n")),e.stack&&(e.extract||o.logLevel>=4)&&(s+="\nStack Trace\n"+e.stack),r.logger.error(s)}(n,t):"function"==typeof o.errorReporting&&o.errorReporting("add",n,t):function(r,n){var t,l,s="less-error-message:"+utils.extractId(n||""),i=e.document.createElement("div"),a=[],c=r.filename||n,p=c.match(/([^\/]+(\?.*)?)$/)[1];i.id=s,i.className="less-error-message",l="<h3>"+(r.type||"Syntax")+"Error: "+(r.message||"There is an error in your .less file")+'</h3><p>in <a href="'+c+'">'+p+"</a> ";var d=function(e,r,o){void 0!==e.extract[r]&&a.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,(parseInt(e.line,10)||0)+(r-1)).replace(/\{class\}/,o).replace(/\{content\}/,e.extract[r]))};r.line&&(d(r,0,""),d(r,1,"line"),d(r,2,""),l+="on line "+r.line+", column "+(r.column+1)+":</p><ul>"+a.join("")+"</ul>"),r.stack&&(r.extract||o.logLevel>=4)&&(l+="<br/>Stack Trace</br />"+r.stack.split("\n").slice(1).join("<br/>")),i.innerHTML=l,browser.createCSS(e.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),i.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===o.env&&(t=setInterval(function(){var r=e.document,o=r.body;o&&(r.getElementById(s)?o.replaceChild(i,r.getElementById(s)):o.insertBefore(i,o.firstChild),clearInterval(t))},10))}(n,t)},remove:function(r){o.errorReporting&&"html"!==o.errorReporting?"console"===o.errorReporting||"function"==typeof o.errorReporting&&o.errorReporting("remove",r):function(r){var o=e.document.getElementById("less-error-message:"+utils.extractId(r));o&&o.parentNode.removeChild(o)}(r)}}};
//# sourceMappingURL=../sourcemaps/browser/error-reporting.js.map
