/**
 * skylark-less - A version of less.js that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-less/
 * @license MIT
 */
define(["../engine/environment/abstract-file-manager"],function(e){"use strict";var t={},n={exports:{}};function r(e){return"object"!=typeof e||Array.isArray(e)||!function(e){var t;for(t in e)return!1;return!0}(e)}return n.exports=function(t,n){var r={},o=function(){};return(o.prototype=new e).alwaysMakePathsAbsolute=function(){return!0},o.prototype.join=function(e,t){return e?this.extractUrlParts(t,e).path:t},o.prototype.doXHR=function(e,r,o,s){var i=new XMLHttpRequest,a=!t.isFileProtocol||t.fileAsync;function u(t,n,r){t.status>=200&&t.status<300?n(t.responseText,t.getResponseHeader("Last-Modified")):"function"==typeof r&&r(t.status,e)}"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/css"),n.debug("XHR: Getting '"+e+"'"),i.open("GET",e,a),i.setRequestHeader("Accept",r||"text/x-less, text/css; q=0.9, */*; q=0.5"),i.send(null),t.isFileProtocol&&!t.fileAsync?0===i.status||i.status>=200&&i.status<300?o(i.responseText):s(i.status,e):a?i.onreadystatechange=function(){4==i.readyState&&u(i,o,s)}:u(i,o,s)},o.prototype.supports=function(e,t,n,r){return!0},o.prototype.clearFileCache=function(){r={}},o.prototype.loadFile=function(e,t,n,o){t&&!this.isPathAbsolute(e)&&(e=t+e),e=n.ext?this.tryAppendExtension(e,n.ext):e,n=n||{};var s=this.extractUrlParts(e,window.location.href).url,i=this;return new Promise(function(e,t){if(n.useFileCache&&r[s])try{var o=r[s];return e({contents:o,filename:s,webInfo:{lastModified:new Date}})}catch(e){return t({filename:s,message:"Error loading file "+s+" error was "+e.message})}i.doXHR(s,n.mime,function(t,n){r[s]=t,e({contents:t,filename:s,webInfo:{lastModified:n}})},function(e,n){t({type:"File",message:"'"+n+"' wasn't found ("+e+")",href:s})})})},o},r(n.exports)?n.exports:r(t)?t:void 0});
//# sourceMappingURL=../sourcemaps/browser/file-manager.js.map
