{"version":3,"sources":["engine/tree/element.js"],"names":["Node","require","Paren","Combinator","Element","combinator","value","isVariable","index","currentFileInfo","visibilityInfo","this","trim","_index","_fileInfo","copyVisibilityInfo","setParent","prototype","type","accept","visitor","visit","eval","context","getIndex","fileInfo","clone","genCSS","output","add","toCSS","firstSelector","charAt","module","exports"],"mappings":";;;;;;;AAAA,IAAIA,KAAOC,QAAQ,UAAWC,MAAQD,QAAQ,WAAYE,WAAaF,QAAQ,gBAC3EG,QAAU,SAAUC,EAAYC,EAAOC,EAAYC,EAAOC,EAAiBC,GAC3EC,KAAKN,WAAaA,aAAsBF,WAAaE,EAAa,IAAIF,WAAWE,GAE7EM,KAAKL,MADY,iBAAVA,EACMA,EAAMM,OACZN,GAGM,GAEjBK,KAAKJ,WAAaA,EAClBI,KAAKE,OAASL,EACdG,KAAKG,UAAYL,EACjBE,KAAKI,mBAAmBL,GACxBC,KAAKK,UAAUL,KAAKN,WAAYM,OAEpCP,QAAQa,UAAY,IAAIjB,KACxBI,QAAQa,UAAUC,KAAO,UACzBd,QAAQa,UAAUE,OAAS,SAAUC,GACjC,IAAId,EAAQK,KAAKL,MACjBK,KAAKN,WAAae,EAAQC,MAAMV,KAAKN,YAChB,iBAAVC,IACPK,KAAKL,MAAQc,EAAQC,MAAMf,KAGnCF,QAAQa,UAAUK,KAAO,SAAUC,GAC/B,OAAO,IAAInB,QAAQO,KAAKN,WAAYM,KAAKL,MAAMgB,KAAOX,KAAKL,MAAMgB,KAAKC,GAAWZ,KAAKL,MAAOK,KAAKJ,WAAYI,KAAKa,WAAYb,KAAKc,WAAYd,KAAKD,mBAEzJN,QAAQa,UAAUS,MAAQ,WACtB,OAAO,IAAItB,QAAQO,KAAKN,WAAYM,KAAKL,MAAOK,KAAKJ,WAAYI,KAAKa,WAAYb,KAAKc,WAAYd,KAAKD,mBAE5GN,QAAQa,UAAUU,OAAS,SAAUJ,EAASK,GAC1CA,EAAOC,IAAIlB,KAAKmB,MAAMP,GAAUZ,KAAKc,WAAYd,KAAKa,aAE1DpB,QAAQa,UAAUa,MAAQ,SAAUP,GAChCA,EAAUA,MACV,IAAIjB,EAAQK,KAAKL,MAAOyB,EAAgBR,EAAQQ,cAMhD,OALIzB,aAAiBJ,QACjBqB,EAAQQ,eAAgB,GAE5BzB,EAAQA,EAAMwB,MAAQxB,EAAMwB,MAAMP,GAAWjB,EAC7CiB,EAAQQ,cAAgBA,EACV,KAAVzB,GAAoD,MAApCK,KAAKN,WAAWC,MAAM0B,OAAO,GACtC,GAEArB,KAAKN,WAAWyB,MAAMP,GAAWjB,GAGhD2B,OAAOC,QAAU9B","file":"../../../engine/tree/element.js","sourcesContent":["var Node = require('./node'), Paren = require('./paren'), Combinator = require('./combinator');\nvar Element = function (combinator, value, isVariable, index, currentFileInfo, visibilityInfo) {\n    this.combinator = combinator instanceof Combinator ? combinator : new Combinator(combinator);\n    if (typeof value === 'string') {\n        this.value = value.trim();\n    } else if (value) {\n        this.value = value;\n    } else {\n        this.value = '';\n    }\n    this.isVariable = isVariable;\n    this._index = index;\n    this._fileInfo = currentFileInfo;\n    this.copyVisibilityInfo(visibilityInfo);\n    this.setParent(this.combinator, this);\n};\nElement.prototype = new Node();\nElement.prototype.type = 'Element';\nElement.prototype.accept = function (visitor) {\n    var value = this.value;\n    this.combinator = visitor.visit(this.combinator);\n    if (typeof value === 'object') {\n        this.value = visitor.visit(value);\n    }\n};\nElement.prototype.eval = function (context) {\n    return new Element(this.combinator, this.value.eval ? this.value.eval(context) : this.value, this.isVariable, this.getIndex(), this.fileInfo(), this.visibilityInfo());\n};\nElement.prototype.clone = function () {\n    return new Element(this.combinator, this.value, this.isVariable, this.getIndex(), this.fileInfo(), this.visibilityInfo());\n};\nElement.prototype.genCSS = function (context, output) {\n    output.add(this.toCSS(context), this.fileInfo(), this.getIndex());\n};\nElement.prototype.toCSS = function (context) {\n    context = context || {};\n    var value = this.value, firstSelector = context.firstSelector;\n    if (value instanceof Paren) {\n        context.firstSelector = true;\n    }\n    value = value.toCSS ? value.toCSS(context) : value;\n    context.firstSelector = firstSelector;\n    if (value === '' && this.combinator.value.charAt(0) === '&') {\n        return '';\n    } else {\n        return this.combinator.toCSS(context) + value;\n    }\n};\nmodule.exports = Element;"]}