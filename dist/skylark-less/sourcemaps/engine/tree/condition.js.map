{"version":3,"sources":["engine/tree/condition.js"],"names":["define","__module__0","exports","module","Node","Condition","op","l","r","i","negate","this","trim","lvalue","rvalue","_index","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","prototype","type","accept","visitor","visit","eval","context","result","a","b","compare"],"mappings":";;;;;;;AAAAA,QAAQ,UAAW,SAAUC,GACzB,aACA,IAAIC,KACAC,GAAWD,YACXE,EAAOH,EACPI,EAAY,SAAUC,EAAIC,EAAGC,EAAGC,EAAGC,GACnCC,KAAKL,GAAKA,EAAGM,OACbD,KAAKE,OAASN,EACdI,KAAKG,OAASN,EACdG,KAAKI,OAASN,EACdE,KAAKD,OAASA,GAqClB,SAASM,EAAkBC,GACvB,MAAqB,iBAAPA,GAAmBC,MAAMC,QAAQF,KAPnD,SAAyBA,GACrB,IAAIG,EACJ,IAAKA,KAAQH,EACT,OAAO,EACX,OAAO,EAGiDI,CAAgBJ,GAE5E,OAtCAZ,EAAUiB,UAAY,IAAIlB,GACNmB,KAAO,YAC3BlB,EAAUiB,UAAUE,OAAS,SAAUC,GACnCd,KAAKE,OAASY,EAAQC,MAAMf,KAAKE,QACjCF,KAAKG,OAASW,EAAQC,MAAMf,KAAKG,SAErCT,EAAUiB,UAAUK,KAAO,SAAUC,GACjC,IAAIC,EAAS,SAAUvB,EAAIwB,EAAGC,GAC1B,OAAQzB,GACR,IAAK,MACD,OAAOwB,GAAKC,EAChB,IAAK,KACD,OAAOD,GAAKC,EAChB,QACI,OAAQ3B,EAAK4B,QAAQF,EAAGC,IACxB,KAAM,EACF,MAAc,MAAPzB,GAAqB,OAAPA,GAAsB,OAAPA,EACxC,KAAK,EACD,MAAc,MAAPA,GAAqB,OAAPA,GAAsB,OAAPA,GAAsB,OAAPA,EACvD,KAAK,EACD,MAAc,MAAPA,GAAqB,OAAPA,EACzB,QACI,OAAO,IAfN,CAkBXK,KAAKL,GAAIK,KAAKE,OAAOc,KAAKC,GAAUjB,KAAKG,OAAOa,KAAKC,IACvD,OAAOjB,KAAKD,QAAUmB,EAASA,GAEnC1B,EAAOD,QAAUG,EAUbW,EAAkBb,EAAOD,SAClBC,EAAOD,QACTc,EAAkBd,GAChBA,OADN","file":"../../../engine/tree/condition.js","sourcesContent":["define(['./node'], function (__module__0) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var Node = __module__0;\n    var Condition = function (op, l, r, i, negate) {\n        this.op = op.trim();\n        this.lvalue = l;\n        this.rvalue = r;\n        this._index = i;\n        this.negate = negate;\n    };\n    Condition.prototype = new Node();\n    Condition.prototype.type = 'Condition';\n    Condition.prototype.accept = function (visitor) {\n        this.lvalue = visitor.visit(this.lvalue);\n        this.rvalue = visitor.visit(this.rvalue);\n    };\n    Condition.prototype.eval = function (context) {\n        var result = function (op, a, b) {\n            switch (op) {\n            case 'and':\n                return a && b;\n            case 'or':\n                return a || b;\n            default:\n                switch (Node.compare(a, b)) {\n                case -1:\n                    return op === '<' || op === '=<' || op === '<=';\n                case 0:\n                    return op === '=' || op === '>=' || op === '=<' || op === '<=';\n                case 1:\n                    return op === '>' || op === '>=';\n                default:\n                    return false;\n                }\n            }\n        }(this.op, this.lvalue.eval(context), this.rvalue.eval(context));\n        return this.negate ? !result : result;\n    };\n    module.exports = Condition;\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}