{"version":3,"sources":["engine/functions/string.js"],"names":["define","__module__0","__module__1","__module__2","__module__3","exports","module","Quoted","Anonymous","JavaScript","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","addMultiple","e","str","evaluated","value","escape","encodeURI","replace","string","pattern","replacement","flags","result","type","toCSS","RegExp","quote","escaped","%","args","prototype","slice","call","arguments","i","length","token","match","encodeURIComponent"],"mappings":";;;;;;;AAAAA,QACI,iBACA,oBACA,qBACA,uBACD,SAAUC,EAAaC,EAAaC,EAAaC,GAChD,aACA,IAAIC,KACAC,KACAC,EAASN,EAAaO,EAAYN,EAAaO,EAAaN,EAgChE,SAASO,EAAkBC,GACvB,MAAqB,iBAAPA,GAAmBC,MAAMC,QAAQF,KAPnD,SAAyBA,GACrB,IAAIG,EACJ,IAAKA,KAAQH,EACT,OAAO,EACX,OAAO,EAGiDI,CAAgBJ,GAE5E,OAnCgGP,EAC/EY,aACbC,EAAG,SAAUC,GACT,OAAO,IAAIV,EAAUU,aAAeT,EAAaS,EAAIC,UAAYD,EAAIE,QAEzEC,OAAQ,SAAUH,GACd,OAAO,IAAIV,EAAUc,UAAUJ,EAAIE,OAAOG,QAAQ,KAAM,OAAOA,QAAQ,KAAM,OAAOA,QAAQ,KAAM,OAAOA,QAAQ,KAAM,OAAOA,QAAQ,MAAO,OAAOA,QAAQ,MAAO,SAEvKA,QAAS,SAAUC,EAAQC,EAASC,EAAaC,GAC7C,IAAIC,EAASJ,EAAOJ,MAGpB,OAFAM,EAAmC,WAArBA,EAAYG,KAAoBH,EAAYN,MAAQM,EAAYI,QAC9EF,EAASA,EAAOL,QAAQ,IAAIQ,OAAON,EAAQL,MAAOO,EAAQA,EAAMP,MAAQ,IAAKM,GACtE,IAAInB,EAAOiB,EAAOQ,OAAS,GAAIJ,EAAQJ,EAAOS,UAEzDC,IAAK,SAAUV,GAEX,IADA,IAAIW,EAAOvB,MAAMwB,UAAUC,MAAMC,KAAKC,UAAW,GAAIX,EAASJ,EAAOJ,MAC5DoB,EAAI,EAAGA,EAAIL,EAAKM,OAAQD,IAC7BZ,EAASA,EAAOL,QAAQ,UAAW,SAAUmB,GACzC,IAAItB,EAAyB,WAAjBe,EAAKK,GAAGX,MAAqBa,EAAMC,MAAM,MAAQR,EAAKK,GAAGpB,MAAQe,EAAKK,GAAGV,QACrF,OAAOY,EAAMC,MAAM,UAAYC,mBAAmBxB,GAASA,IAInE,OADAQ,EAASA,EAAOL,QAAQ,MAAO,KACxB,IAAIhB,EAAOiB,EAAOQ,OAAS,GAAIJ,EAAQJ,EAAOS,YAYzDvB,EAAkBJ,GACXA,EACFI,EAAkBL,GAChBA,OADN","file":"../../../engine/functions/string.js","sourcesContent":["define([\n    '../tree/quoted',\n    '../tree/anonymous',\n    '../tree/javascript',\n    './function-registry'\n], function (__module__0, __module__1, __module__2, __module__3) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var Quoted = __module__0, Anonymous = __module__1, JavaScript = __module__2, functionRegistry = __module__3;\n    functionRegistry.addMultiple({\n        e: function (str) {\n            return new Anonymous(str instanceof JavaScript ? str.evaluated : str.value);\n        },\n        escape: function (str) {\n            return new Anonymous(encodeURI(str.value).replace(/=/g, '%3D').replace(/:/g, '%3A').replace(/#/g, '%23').replace(/;/g, '%3B').replace(/\\(/g, '%28').replace(/\\)/g, '%29'));\n        },\n        replace: function (string, pattern, replacement, flags) {\n            var result = string.value;\n            replacement = replacement.type === 'Quoted' ? replacement.value : replacement.toCSS();\n            result = result.replace(new RegExp(pattern.value, flags ? flags.value : ''), replacement);\n            return new Quoted(string.quote || '', result, string.escaped);\n        },\n        '%': function (string) {\n            var args = Array.prototype.slice.call(arguments, 1), result = string.value;\n            for (var i = 0; i < args.length; i++) {\n                result = result.replace(/%[sda]/i, function (token) {\n                    var value = args[i].type === 'Quoted' && token.match(/s/i) ? args[i].value : args[i].toCSS();\n                    return token.match(/[A-Z]$/) ? encodeURIComponent(value) : value;\n                });\n            }\n            result = result.replace(/%%/g, '%');\n            return new Quoted(string.quote || '', result, string.escaped);\n        }\n    });\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}