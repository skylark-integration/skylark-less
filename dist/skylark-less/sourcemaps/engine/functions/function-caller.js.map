{"version":3,"sources":["engine/functions/function-caller.js"],"names":["define","__module__0","exports","module","Expression","functionCaller","name","context","index","currentFileInfo","this","toLowerCase","func","frames","functionRegistry","get","__isValidToReturn","obj","Array","isArray","attr","__isEmptyObject","prototype","isValid","Boolean","call","args","filter","item","type","map","subNodes","value","length","apply"],"mappings":";;;;;;;AAAAA,QAAQ,sBAAuB,SAAUC,GACrC,aACA,IAAIC,KACAC,GAAWD,YACXE,EAAaH,EACbI,EAAiB,SAAUC,EAAMC,EAASC,EAAOC,GACjDC,KAAKJ,KAAOA,EAAKK,cACjBD,KAAKF,MAAQA,EACbE,KAAKH,QAAUA,EACfG,KAAKD,gBAAkBA,EACvBC,KAAKE,KAAOL,EAAQM,OAAO,GAAGC,iBAAiBC,IAAIL,KAAKJ,OAsC5D,SAASU,EAAkBC,GACvB,MAAqB,iBAAPA,GAAmBC,MAAMC,QAAQF,KAPnD,SAAyBA,GACrB,IAAIG,EACJ,IAAKA,KAAQH,EACT,OAAO,EACX,OAAO,EAGiDI,CAAgBJ,GAE5E,OAvCAZ,EAAeiB,UAAUC,QAAU,WAC/B,OAAOC,QAAQd,KAAKE,OAExBP,EAAeiB,UAAUG,KAAO,SAAUC,GAwBtC,OAvBIR,MAAMC,QAAQO,KACdA,EAAOA,EAAKC,OAAO,SAAUC,GACzB,MAAkB,YAAdA,EAAKC,OAIVC,IAAI,SAAUF,GACb,GAAkB,eAAdA,EAAKC,KAAuB,CAC5B,IAAIE,EAAWH,EAAKI,MAAML,OAAO,SAAUC,GACvC,MAAkB,YAAdA,EAAKC,OAKb,OAAwB,IAApBE,EAASE,OACFF,EAAS,GAET,IAAI3B,EAAW2B,GAG9B,OAAOH,KAGRlB,KAAKE,KAAKsB,MAAMxB,KAAMgB,IAEjCvB,EAAOD,QAAUG,EAUbW,EAAkBb,EAAOD,SAClBC,EAAOD,QACTc,EAAkBd,GAChBA,OADN","file":"../../../engine/functions/function-caller.js","sourcesContent":["define(['../tree/expression'], function (__module__0) {\n    'use strict';\n    var exports = {};\n    var module = { exports: {} };\n    var Expression = __module__0;\n    var functionCaller = function (name, context, index, currentFileInfo) {\n        this.name = name.toLowerCase();\n        this.index = index;\n        this.context = context;\n        this.currentFileInfo = currentFileInfo;\n        this.func = context.frames[0].functionRegistry.get(this.name);\n    };\n    functionCaller.prototype.isValid = function () {\n        return Boolean(this.func);\n    };\n    functionCaller.prototype.call = function (args) {\n        if (Array.isArray(args)) {\n            args = args.filter(function (item) {\n                if (item.type === 'Comment') {\n                    return false;\n                }\n                return true;\n            }).map(function (item) {\n                if (item.type === 'Expression') {\n                    var subNodes = item.value.filter(function (item) {\n                        if (item.type === 'Comment') {\n                            return false;\n                        }\n                        return true;\n                    });\n                    if (subNodes.length === 1) {\n                        return subNodes[0];\n                    } else {\n                        return new Expression(subNodes);\n                    }\n                }\n                return item;\n            });\n        }\n        return this.func.apply(this, args);\n    };\n    module.exports = functionCaller;\n    function __isEmptyObject(obj) {\n        var attr;\n        for (attr in obj)\n            return !1;\n        return !0;\n    }\n    function __isValidToReturn(obj) {\n        return typeof obj != 'object' || Array.isArray(obj) || !__isEmptyObject(obj);\n    }\n    if (__isValidToReturn(module.exports))\n        return module.exports;\n    else if (__isValidToReturn(exports))\n        return exports;\n});"]}