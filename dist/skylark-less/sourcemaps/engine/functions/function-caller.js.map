{"version":3,"sources":["engine/functions/function-caller.js"],"names":["Expression","require","functionCaller","name","context","index","currentFileInfo","this","toLowerCase","func","frames","functionRegistry","get","prototype","isValid","Boolean","call","args","Array","isArray","filter","item","type","map","subNodes","value","length","apply","module","exports"],"mappings":";;;;;;;AAAA,IAAIA,WAAaC,QAAQ,sBACrBC,eAAiB,SAAUC,EAAMC,EAASC,EAAOC,GACjDC,KAAKJ,KAAOA,EAAKK,cACjBD,KAAKF,MAAQA,EACbE,KAAKH,QAAUA,EACfG,KAAKD,gBAAkBA,EACvBC,KAAKE,KAAOL,EAAQM,OAAO,GAAGC,iBAAiBC,IAAIL,KAAKJ,OAE5DD,eAAeW,UAAUC,QAAU,WAC/B,OAAOC,QAAQR,KAAKE,OAExBP,eAAeW,UAAUG,KAAO,SAAUC,GAwBtC,OAvBIC,MAAMC,QAAQF,KACdA,EAAOA,EAAKG,OAAO,SAAUC,GACzB,MAAkB,YAAdA,EAAKC,OAIVC,IAAI,SAAUF,GACb,GAAkB,eAAdA,EAAKC,KAAuB,CAC5B,IAAIE,EAAWH,EAAKI,MAAML,OAAO,SAAUC,GACvC,MAAkB,YAAdA,EAAKC,OAKb,OAAwB,IAApBE,EAASE,OACFF,EAAS,GAET,IAAIxB,WAAWwB,GAG9B,OAAOH,KAGRd,KAAKE,KAAKkB,MAAMpB,KAAMU,IAEjCW,OAAOC,QAAU3B","file":"../../../engine/functions/function-caller.js","sourcesContent":["var Expression = require('../tree/expression');\nvar functionCaller = function (name, context, index, currentFileInfo) {\n    this.name = name.toLowerCase();\n    this.index = index;\n    this.context = context;\n    this.currentFileInfo = currentFileInfo;\n    this.func = context.frames[0].functionRegistry.get(this.name);\n};\nfunctionCaller.prototype.isValid = function () {\n    return Boolean(this.func);\n};\nfunctionCaller.prototype.call = function (args) {\n    if (Array.isArray(args)) {\n        args = args.filter(function (item) {\n            if (item.type === 'Comment') {\n                return false;\n            }\n            return true;\n        }).map(function (item) {\n            if (item.type === 'Expression') {\n                var subNodes = item.value.filter(function (item) {\n                    if (item.type === 'Comment') {\n                        return false;\n                    }\n                    return true;\n                });\n                if (subNodes.length === 1) {\n                    return subNodes[0];\n                } else {\n                    return new Expression(subNodes);\n                }\n            }\n            return item;\n        });\n    }\n    return this.func.apply(this, args);\n};\nmodule.exports = functionCaller;"]}